<!DOCTYPE html>
<html manifest="cache.appcache">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1" />
    <title>Lexical Scanning in Go</title>
    <link href="http://fonts.googleapis.com/css?family=Droid+Sans|Droid+Sans+Mono" rel="stylesheet" type="text/css" />
    <link id="prettify-link" href="src/prettify/prettify.css" rel="stylesheet" disabled />
    <link href="css/default.css" class="theme" rel="stylesheet" media="screen"  />
    <link href="css/common.css" rel="stylesheet" media="screen" />
  </head>
  <body>
    <nav id="helpers">
      <button title="Previous slide" id="nav-prev" class="nav-prev">⇽</button> 
      <button title="Jump to a random slide" id="slide-no">5</button> 
      <button title="Next slide" id="nav-next" class="nav-next">⇾</button>
      <menu>
        <button type="checkbox" data-command="toc" title="Table of Contents" class="toc">TOC</button>
        <button type="checkbox" data-command="notes" title="View Slide Notes">✏</button>
        <button type="checkbox" data-command="source" title="View slide source">↻</button>
        <button type="checkbox" data-command="help" title="View Help">?</button>
      </menu>
    </nav>
    <div class="presentation">
      <div id="presentation-counter">Loading...</div>
      <div class="slides">
        <div class="slide" id="landing-slide">
          <style>
            #landing-slide p {
              font-size: 35px;
            }
          </style>
          <section class="middle">
            <p>This presentation is an HTML5 web site</p>
            <p>Press <span id="left-init-key" class="key">&rarr;</span> key to advance.</p>
          </section>

          <aside class="note">
            <section>
              Welcome! (This field is for presenter notes and commentary.)
            </section>
          </aside> 
        </div>

        <div class="slide" id="controls-slide">
          <header>Controls</header>
          <style>
            #controls-slide li, #controls-slide p {
              font-size: 32px;
            }
            #controls-slide .key {
              bottom: 2px;
            }
          </style>
          <section>
            <ul>
              <li><span class="key">&larr;</span> and <span class="key">&rarr;</span> to move around.</li>
              <li><span class="key">Ctrl/Command</span> and <span class="key">+</span> or <span class="key">-</span> to zoom.</li>
              <li><span class="key">S</span> to view page source.</li>
              <li><span class="key">N</span> to toggle speaker notes.</li>
              <li><span class="key">3</span> to toggle 3D effect.</li>
              <li><span class="key">0</span> to toggle help.</li>
            </ul>
          </section>
        </div>

        <div class="slide" id="title-slide">
          <style>
            #title-slide h1, #title-slide h2 {
              color: black;
            }
            #title-slide h1 {
              font-size: 80px;
            }
            #title-slide h2 {
              font-size: 36px;
            }
          </style>
          <section class="middle">
            <hgroup>
              <h1>
                Lexical Scanning in Go
              </h1>
              <h2>
                Rob Pike<br>r@golang.org<br>GTUG Sydney<br>Aug 30, 2011<br>
              </h2>
            </hgroup>
          </section>
        </div>

	<!-- start of slide 0 -->
        <div class="slide" id="slide-0">
          <header>A new template system</header>

          <section>
            <p>
            Wanted to replace the old Go template package.<br>
            
            It had many problems:<br>
            </p>
            
            <ul>
            
            <li>inflexible</li>
            
            <li>inexpressive</li>
            
            <li>code too fragile</li>
            
            </ul>
            


          </section>
        </div> <!-- end slide template -->
      <!-- end of slide 0 --><!-- start of slide 1 -->
        <div class="slide" id="slide-1">
          <header>A new template system</header>

          <section>
            <p>
            Key change was re-engineering with a true lexer, parser,<br>
            
            and evaluator.<br>
            
            <br>
            
            NEED EXAMPLES HERE<br>
            
            <br>
            </p>
            


          </section>
        </div> <!-- end slide template -->
      <!-- end of slide 1 --><!-- start of slide 2 -->
        <div class="slide" id="slide-2">
          <header>Lex items</header>

          <section>
            <p>
            Two things identify each lexed item:<br>
            </p>
            
            <ul>
            
            <li>its type</li>
            
            <li>its value; a string is all we need</li>
            
            </ul>
            


<pre>
<!--{{code "lex/lex1.go" `/item.represents/` `/^}/`}}
-->// item represents a token returned from the scanner.
type item struct {
    typ itemType
    val string
}
</pre>

          </section>
        </div> <!-- end slide template -->
      <!-- end of slide 2 --><!-- start of slide 3 -->
        <div class="slide" id="slide-3">
          <header>Lex type</header>

          <section>
            <p>
            The type is just an integer constant.<br>
            
            We use iota to define the values.<br>
            
            <br>
            </p>
            


<pre>
<!--{{code "lex/lex1.go" `/itemType.identifies/` `/type/`}}
-->// itemType identifies the type of lex items.
type itemType int
</pre>

<pre>
<!--{{code "lex/lex1.go" `/const/` `/itemEOF/`}}
-->const (
    itemError itemType = iota // error occurred;
                              // value is text of error
    itemDot                   // the cursor, spelled &#39;.&#39;
    itemEOF
</pre>

          </section>
        </div> <!-- end slide template -->
      <!-- end of slide 3 --><!-- start of slide 4 -->
        <div class="slide" id="slide-4">
          <header>Lex type values (continued)</header>

          <section>
            <p></p>
            


<pre>
<!--{{code "lex/lex1.go" `/itemElse/` `/^\)/`}}
-->    itemElse       // else keyword
    itemEnd        // end keyword
    itemField      // identifier, starting with &#39;.&#39;
    itemIdentifier // identifier
    itemIf         // if keyword
    itemLeftMeta   // left meta-string
    itemNumber     // number
    itemPipe       // pipe symbol
    itemRange      // range keyword
    itemRawString  // raw quoted string (includes quotes)
    itemRightMeta  // right meta-string
    itemString     // quoted string (includes quotes)
    itemText       // plain text
)
</pre>

          </section>
        </div> <!-- end slide template -->
      <!-- end of slide 4 --><!-- start of slide 5 -->
        <div class="slide" id="slide-5">
          <header>Printing a lex type</header>

          <section>
            <p>
            Define a String() string method and the &#34;enum&#34; prints itself.<br>
            
            <br>
            </p>
            


<pre>
<!--{{code "lex/lex1.go" `/func.*item.*String/` `/^}/`}}
-->func (i item) String() string {
    switch i.typ {
    case itemEOF:
        return &#34;EOF&#34;
    case itemError:
        return i.val
    }
    if len(i.val) &gt; 10 {
        return fmt.Sprintf(&#34;%.10q...&#34;, i.val)
    }
    return fmt.Sprintf(&#34;%q&#34;, i.val)
}
</pre>

          </section>
        </div> <!-- end slide template -->
      <!-- end of slide 5 -->

      </div>

      <div id="speaker-note" class="invisible" style="display: none;">
      </div> <!-- speaker note -->
      <aside id="help" class="sidebar invisible" style="display: hidden;">
        <table>
          <caption>Help</caption>
          <tbody>
            <tr>
              <th>Move Around</th>
              <td>&larr;&nbsp;&rarr;</td>
            </tr>
            <tr>
              <th>Source File</th>
              <td>s</td>
            </tr>
            <tr>
              <th>Speaker Notes</th>
              <td>n</td>
            </tr>
            <tr>
              <th>Toggle 3D</th>
              <td>3</td>
            </tr>
            <tr>
              <th>Help</th>
              <td>0</td>
            </tr>
          </tbody>
        </table>
      </aside>

    </div> <!-- presentation -->

    <!--[if lt IE 9]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">
    </script>
    <script>CFInstall.check({ mode: "overlay" });</script>
    <![endif]-->

    <script src="js/utils.js"></script>
  </body>
</html>
